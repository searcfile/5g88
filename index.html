<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>5G88 Video</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Topbar -->
  <nav class="topbar">
    <button id="menuBtn" class="icon-btn" aria-label="Menu">â˜°</button>
    <div class="brand">5G88 <span>Video</span></div>

    <div class="top-right">
      <!-- Lang switch kanan atas -->
      <div class="lang-switch" id="langSwitch">
        <button id="langBtn" class="icon-btn" aria-expanded="false">ğŸŒ</button>
        <div id="langMenu" class="lang-menu" role="menu">
          <button data-lang="en">ENGLISH</button>
          <button data-lang="zh">CHINESE</button>
          <button data-lang="ms">MALAYSIAN</button>
          <button data-lang="id">INDONESIA</button>
          <button data-lang="vi">VIETNAM</button>
        </div>
      </div>
      <div id="userBadge" class="user-badge"></div>
    </div>
  </nav>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar" aria-label="Sidebar">
    <div class="profile" id="profileCard">
      <div id="avatar" class="avatar"></div>
      <div>
        <div id="username" class="name">(profile) [nama]</div>
        <div id="userEmail" class="email"></div>
      </div>
    </div>

    <a href="#" data-nav="home" class="nav-item active" data-i18n="home">ğŸ  Home</a>
    <a href="#" data-nav="watchHistory" class="nav-item" data-i18n="watchHistory">ğŸ•’ Watch History</a>
    <a href="#" data-nav="searchHistory" class="nav-item" data-i18n="searchHistory">ğŸ” Search History</a>
    <a href="#" data-nav="newVideos" class="nav-item" data-i18n="newVideos">âœ¨ New Videos</a>

    <!-- Admin-only -->
    <a href="admin.html" id="adminPanelLink" class="nav-item hidden">ğŸ›  Admin Panel</a>
    <button id="adminAddBtn" class="btn w-full mt16 hidden">ï¼‹ Add Video (Admin)</button>

    <a href="#" id="logoutBtn" class="nav-item logout" data-i18n="logout">ğŸšª Logout</a>
  </aside>

  <!-- Content -->
  <main class="container">
    <div class="row gap10 search-row">
      <div class="grow">
        <input id="searchInput" placeholder="Cari judul video..." data-i18n-placeholder="searchPlaceholder" aria-label="Search videos">
      </div>
      <button id="searchBtn" class="icon-btn" aria-label="Search" title="Search">
        <!-- SVG search -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <!-- Player Card -->
    <section class="player-card">
      <h3 id="videoTitle" class="video-title">Loadingâ€¦</h3>
      <video id="player" controls playsinline></video>

      <div class="controls">
        <button class="btn" data-skip="-600">&lt;10M</button>
        <button class="btn" data-skip="-60">&lt;1M</button>
        <button class="btn" data-skip="-10">&lt;10S</button>
        <button class="btn" data-skip="10">10S&gt;</button>
        <button class="btn" data-skip="60">1M&gt;</button>
        <button class="btn" data-skip="600">10M&gt;</button>
      </div>

      <div class="actions">
        <button id="likeBtn" class="chip">ğŸ‘ <span id="likeCount">0</span></button>
        <button id="dislikeBtn" class="chip">ğŸ‘ <span id="dislikeCount">0</span></button>
        <button id="shareBtn" class="chip">ğŸ”— Share</button>
        <button id="fsBtn" class="chip">â›¶ Fullscreen</button>
      </div>
    </section>

    <!-- List -->
    <section>
      <ul id="videoList" class="video-list" aria-live="polite"></ul>
      <div id="noData" class="no-data hidden">No data</div>
    </section>

    <!-- Simple pages -->
    <section id="historyWrap" class="hidden">
      <h3>History Nonton</h3>
      <ul id="watchHistory" class="simple-list"></ul>
      <h3>History Pencarian</h3>
      <ul id="searchHistory" class="simple-list"></ul>
    </section>

    <!-- My Account modal -->
    <dialog id="accModal" class="dialog">
      <form method="dialog" class="dialog-card">
        <h3>My Account</h3>
        <div id="accInfo" class="simple-list" style="max-height:40vh;overflow:auto"></div>
        <div class="row gap10 mt12">
          <button class="btn" value="ok">Close</button>
        </div>
        <small>Password tidak pernah diberikan oleh Google/Facebook ke aplikasi.</small>
      </form>
    </dialog>
  </main>

  <!-- Admin Add Modal -->
  <dialog id="addModal" class="dialog">
    <form method="dialog" class="dialog-card">
      <h3>Add Video (Admin)</h3>

      <label>Judul
        <input id="m_title" required>
      </label>

      <details>
        <summary><b>Opsi 1:</b> Pakai URL video</summary>
        <label>Video URL (mp4 / HLS)
          <input id="m_src" placeholder="https://.../video.mp4">
        </label>
        <label>Intro 30s URL (opsional)
          <input id="m_intro" placeholder="https://.../intro.mp4">
        </label>
      </details>

      <details>
        <summary><b>Opsi 2:</b> Upload file ke Storage</summary>
        <label>Upload Video File
          <input id="m_file" type="file" accept="video/*">
        </label>
        <label>Upload Intro 30s (opsional)
          <input id="m_file_intro" type="file" accept="video/*">
        </label>
        <progress id="m_prog" value="0" max="100" style="width:100%;display:none"></progress>
      </details>

      <div class="row gap10 mt12">
        <button id="m_save" class="btn grow" value="save">Save</button>
        <button class="btn ghost" value="cancel">Cancel</button>
      </div>
      <small>Disimpan ke Storage <code>/videos/</code> & DB <code>/videos</code></small>
    </form>
  </dialog>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <script src="firebase.js"></script>
  <!-- App -->
  <script src="script.js"></script>
</body>
</html>
